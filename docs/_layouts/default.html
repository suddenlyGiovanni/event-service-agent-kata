<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {% seo %}
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      {% if site.title and site.title != page.title %}
        <h1>
          <a href="{{ '/' | absolute_url }}">{{ site.title }}</a>
        </h1>
      {% endif %}

      {{ content }}

      {% if site.github.private != true and site.github.license %}
        <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
          This site is open source. {% github_edit_link "Improve this page" %}.
        </div>
      {% endif %}
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.1/anchor.min.js"
      integrity="sha512-zPB79j2C+3sFS9zcA3vg/z6bVKzJVEyu9pY5w89akQRys76zpAT2t6S3wZKla3QQ14O5l/Yt0RUQ/DHXx82Y5g=="
      crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>

    <!-- Mermaid.js for diagram rendering -->
    <script type="module">
      // Process code blocks with language-mermaid class
      // Kramdown generates: <pre><code class="language-mermaid">...</code></pre>
      // We need to transform these into <div class="mermaid">...</div>
      document.querySelectorAll('pre > code.language-mermaid').forEach((codeElement) => {
        const pre = codeElement.parentElement;
        const mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = codeElement.textContent;
        pre.replaceWith(mermaidDiv);
      });


      // Import and initialize Mermaid
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';

      mermaid.initialize({ 
        securityLevel: 'strict', 
        startOnLoad: true,
        theme: 'default'
      });
    </script>
  </body>
</html>
